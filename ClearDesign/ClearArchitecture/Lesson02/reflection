Состояние запоминается только внутри основной процедуры, при выходе из неё оно теряется. Это может быть проблематично при необходимости передачи в другие места программы.
Не вынес печать текста в отдельную функцию, это было бы полезно.
Работа с неконстантными ссылками, опасно и черевато утечкой памяти (если вместо double будет объект например, внутри функции его можно будет удалить) и неожиданными изменениями.
